## **2025/8/21  V6.8  正式版本**
【新增】新增ASP/ASPX代码执行语义分析模块<br/>   
【新增】文件上传新增asp/aspx/ashx恶意文件拦截<br/> 
【新增】新增自动三层解码功能:url编码、base64、hex 自动解码<br/> 
【新增】弱密码检测新增MD5弱密码<br/> 
【修复】修复URL太长导致不写入数据库的问题<br/> 
【更新】更新谷歌蜘蛛IP列表<br/> 
【更新】修复PHP代码执行语义分析模块多处误报<br/>

## **2025/7/28  V6.7  正式版本**
【新增】新增Java反序化语义分析模块<br/>  
【新增】新增模板注入语义分析模块<br/>


## **2025/7/18  V6.6  正式版本**
【新增】新增PHP反序化语义分析模块<br/> 
【修复】修复ssrf 语义分析模块对某些情况的误报<br/>
【修复】修复某些情况下记录日志失败的问题<br/>



## **2025/7/14 V6.5   正式版本**
【新增】新增Java代码执行检测语义分析模块-支持Jsp木马检测、支持EL表达式检测、支持JSP命名空间检测<br/>  
【优化】优化日志清理界面<br/> 
【修复】修复在API的情况下导致CC放行的问题<br/>


## **2025-07-08 V6.4   正式版本**
【新增】增加日志清理功能,功能位置:网站列表-日志清理<br/> 
【新增】增加syslog 外发功能,功能位置:设置-syslog设置<br/> 
【新增】端口转发目标主机增加域名的支持<br/> 
【修复】修复SQL注入语义分析引擎误报<br/> 
【修复】修复PHP代码执行语义分析引擎误报<br/> 
【修复】修复文件包含语义分析引擎误报<br/> 
【修复】修复ssrf语义分析引擎误报<br/> 
致谢以下用户:
@chinanala
@Yeqingky
@Riwen888


## **2025-07-04 V6.3   正式版本**
【新增】新增文件包含语义分析模块<br/> 
【优化】优化WAF拦截性能<br/>



## **2025-07-01 V6.2    正式版本**
【优化】优化ssrf引擎的执行速度<br/> 
【优化】优化命令执行引擎的执行速度<br/>
【修复】修复登录时使用二次认证存在的异常判断<br/>



## **2025-06-28 V6.1    正式版本**
【修复】修复在某些特殊情况下ssrf语义分析模块导致的内存增高、和CPU跑高的问题<br/>


## **2025-06-26 V6.0    正式版本**
【新增】ssrf语义分析模块:包含文件读取拦截、各种伪协议拦截（暂不支持ARM）<br/> 
【新增】新增pbootcms的拦截<br/> 
【修复】修复CC防御严格模式和超严格模式中对于API接口放行问题<br/>
【移除】移除ssrf的正则表达式规则<br/>


## **2025-06-07 V5.9     正式版本**
【新增】ARM系统机器增加PHP代码语义分析<br/>  
【重构】命令执行拦截语义分析库重构<br/>
【重构】防护大屏重构<br/>
【修复】修复网站日志删除不了的问题<br/>


## **2025-05-29 V5.8     正式版本**
【新增】PHP代码执行检测改成语义分析检测 识别率达到99%(暂时不支持ARM.下个版本支持)<br/> 
【修复】修复IP组打开空白的问题<br/> 
【修复】修复网站加速因为重命名导致的错误<br/> 
【修复】修复规则命令记录提前清理的问题<br/> 
【修复】修复IPV6的服务器更新不了的问题<br/> 
【修复】修复监控页面图表不准的问题<br/> 
致谢以下用户:<br/>
@simplove<br/> 
@chinanala<br/> 
@ShiDai567<br/> 
@zhuimc<br/> 
@Harry<br/>


## **2025-05-09 V5.7 正式版本**

【开源】开源PHP语义分析引擎 https://github.com/aaPanel/aaWAF/tree/main/php_engine<br/>
【新增】新增全局API 使用教程:https://github.com/aaPanel/aaWAF/blob/main/API.md<br/>
【新增】自定义拦截 增加POST请求参数拦截、body 内容拦截 <br/>
【新增】证书重新生成 PS:（服务器对外IP不变的情况下生成的证书是一样的）<br/>
【优化】规则命中记录 由2000条日志修改为2W条<br/>
【优化】规则命中记录 内容替换 增加URL显示<br/>
【优化】今日请求数量增加默认站点访问的次数<br/>
【优化】慢请求URL修改成完整的URL <br/>
【优化】网站加速增加ico、webp、avif 类型缓存（新增的网站才有）<br/>
【优化】网站配置文件默认新增X-Forwarded-Proto头<br/>
【修复】修复流量限制规则和描述不符<br/>
【修复】修复IP拉黑记录不解封问题<br/>
【修复】修复超时时间不一致的问题<br/>
【修复】修复IP组不显示的情况<br/>
【修复】修复无法下载网站日志的问题<br/>

致谢以下用户:
@Illustar0<br/>
@defeatedperson<br/>
@361611074<br/>
@meng-luo<br/>
@simplove<br/>
@LiuNianJiang<br/>
@wenjiamian<br/>
@mianidc<br/>
@yuchao-su<br/>
<br/>

## **2025-04-14 V5.6 正式版本**

【移除】移除SQL注入正则匹配规则<br/>
【优化】SQL注入检测全面采用语义分析检测方式、准确率提升至99.10% 误报降低至0.89%<br/>
PS:升级的不会自动移除正则匹配规则<br/>
<br/>

## **2025-04-08 V5.5 正式版本**

【开源】代码已开源 https://github.com/aaPanel/aaWAF<br/>
【修复】修复自动续签存在的bug<br/>
【修复】修复IP组存在的bug<br/>
【修复】修复端口转发存在影响Nginx稳定的bug<br/>
<br/>


## **2025-03-18 V5.4 正式版本**
【增加】首页增加3D地图<br/>
【修复】修复多ssl端口导致添加失败的问题<br/>
<br/>


## **2025-02-24 V5.3 正式版本**
【增加】增加SSl证书批量续签<br/>
【增加】增加ssl证书快到期自动续签(小于20天的证书自动触发)<br/>
【增加】首页增加蜘蛛爬取详情<br/>
【修复】修复SQL注入引擎误报<br/>
后续更新计划：
1.修复续签导致强制HTTPS不能自动开启的问题
2.增加LRU缓存加速研判速度
3.增加URL统计列表展示
4.增加攻击告警功能、续签告警等
敬请期待
<br/>
<br/>



## **2025-01-02 V5.2 正式版本**
【增加】增加等待室的限流功能<br/>
【增加】增加流量限制功能<br/>
【优化】平均降低百分之2的CPU占用率<br/>
【修复】修复nil判断导致的错误<br/>
<br/>
<br/>


## **2024-12-19 V5.1 正式版本**
【增加】增加神马蜘蛛IP库<br/>
【优化】优化基础CC逻辑,减少5%-10%误报拦截<br/>
【优化】蜘蛛IP改为IP地址范围<br/>
【修复】自定义CC功能拦截后解封不了的问题<br/>
【修复】SQL注入引擎导致的错误<br/>
【修复】已知BUG<br/>
下个版本增加爬虫防御-动态加密功能、流量限制功能、尽情期待
<br/>
<br/>


## **2024-12-03 V5.0 正式版本**
注意：<br/>
本次升级将升级 cloudwaf_nginx 容器版本为 nginx-openresty/1.25.3.2 ，修复安全漏洞(CVE-2024-39702) <br/>
建议使用ssh工具登录服务器执行：btw 17 命令进行升级。<br/>
升级过程中网站无法访问，建议在用户访问量少时升级，预计需要 1-2 分钟。<br/>
 CVE-2024-39702   OpenResty 1.19.3.1 至 1.25.3.1 的 lj_str_hash.c 中，字符串哈希函数（在字符串驻留期间使用）允许 HashDoS（哈希拒绝服务）攻击。
<br/>
<br/>


## **2024-11-23 V4.9 正式版本**
【优化】底层代码逻辑<br/>
【修复】有时无法获取最新版本信息的BUG
<br/>
<br/>

## **2024-08-16 V4.8 正式版本**
【优化】优化CC策略：修复URL级CC防御启用后不关闭的问题  
【修复】修复扫描器拦截错误
<br/>
<br/>

## **2024-07-11 V4.7 正式版本**
【优化】优化CC策略：将btwaf小尾部去除  
【优化】更新蜘蛛IP  
【修复】已知BUG  

<br/>
<br/>

## **2024-05-09 V4.6 正式版本**
【优化】优化首页请求趋势增加可选日期  
【优化】恶意IP库减少误拦截  
【修复】SQL注入引擎导致的错误  
【修复】已知BUG  
<br/>
<br/>


## **2024-04-12 V4.5 正式版本**
【修复】日志文件下载后有时显示文件已损坏的BUG  
【修复】已知BUG
<br/>
<br/>

## **2024-03-30 V4.4 正式版本**
【新增】自定义规则--同一规则应用到多站点功能
【新增】自定义规则--规则复制功能
【优化】地区限制匹配逻辑
【优化】lua代码获取请求uri
【优化】域名管理--端口检测逻辑
【优化】黑白名单导入方法
【修复】地图数据--全部请求--ip排行不显示ipv6数据BUG
特别致谢以下用户提供的建议和环境：李大仁、Sunny、🚙 chen、Q ＆ A、邦

<br/>
<br/>

## **2024-03-15 V4.3 正式版本**
【新增】数据统计--蜘蛛统计
【新增】数据统计--时间颗粒度、上一期不对比、禁止访问功能
【新增】IP组--堡塔恶意IP库
【新增】拦截日志--批量加白URI功能
【新增】拦截日志--批量拉黑功能
【新增】uri访问统计增加非200状态码uri
【调整】数据统计开放公测
【优化】自定义cc防御逻辑
【优化】自定义规则--仅记录模式逻辑
特别致谢以下用户提供的建议和环境：橘子🍊

<br/>
<br/>

## **2024-03-08 V4.2 正式版本**
【新增】统计分析--数据统计
【新增】自定义规则--user-agent模糊匹配
【修复】个别场景下URL级CC防御自动开启BUG
【修复】地区限制选择全部网站时BUG
【修复】更新、修复waf BUG
【优化】waf内存占用优化
【优化】网站列表搜索兼容域名形式
特别致谢以下用户提供的建议和环境：钢铁、中国制造、Sunny、枞阳二三事

<br/>
<br/>


## **2024-03-02 V4.1 正式版本**
【调整】专业版授权取消网站数量限制
【调整】取消旗舰版购买

<br/>
<br/>


## **2024-03-01 V4.0 正式版本**
【新增】网站acme ssl证书申请功能
【修复】个别场景加白URI不生效BUG
【修复】IP黑名单编辑IP段BUG
【优化】常用参数配置conf生成逻辑
【优化】证书夹部署证书逻辑
【优化】自定义拦截--通配符域名数据
【优化】网站管理--编辑域名端口检测逻辑
特别致谢以下用户提供的建议和环境：Sola 学习版、王大爷、异人、543贰one、Uncle C

<br/>
<br/>


## **2024-02-23 V3.8 正式版本**
【新增】网站弱密码检测
【新增】未添加IP为网站时默认返回403
【新增】规则配置向导-可视化按流量传送阶段配置规则
【优化】命令执行拦截功能优化并设为默认开启
【优化】删除极少用到真实IP传递请求头，减少开销增加识别率
【优化】增强内部请求安全性

<br/>
<br/>

## **2024-02-05 V3.7 正式版本**
【新增】waf规则配置备份
【新增】waf规则文件损坏自动检测修复机制
【优化】 网站管理--回源配置域名巡检逻辑
【优化】<通配所有域名>网站的域名管理配置
【优化】网站列表分页显示
【优化】特定场景下自定义网站名不生效
【优化】优化同一域名不同端口建站逻辑
【修复】cc日志无法清空BUG
【修复】ssl证书显示BUG

<br/>
<br/>

## **2024-02-02 V3.6 正式版本**
【新增】网站名修改入口 【网站配置 -- 域名管理】
【新增】回源域名增加域名解析前置检测 
【新增】证书部署支持指定ssl端口 
【调整】添加网站交互 
【调整】网站管理--域名管理交互 
【调整】网站管理--优先级提示 
【优化】泛域名列表展示 
【优化】个别机器添加IP端口配置端口放行不成功问题 
【修复】存在IP组时IP黑白名单无法导出问题
【修复】个别机器不使用默认网站名不自动放行端口BUG

<br/>
<br/>

## **2024-01-31 V3.5 正式版本**
【新增】微信、支付宝回调IP白名单 
【优化】CC拦截效果，减少CC拦截误报 
【优化】智能识别API 
【优化】蜘蛛识别，减少爬取错误

<br/>
<br/>

## **2024-01-26 V3.4 正式版本**
【修复】修复ip获取问题

<br/>
<br/>

## **2024-01-25 V3.3 正式版本**
【优化】增强输入过滤

<br/>
<br/>

## **2024-01-24 V3.2 正式版本**
【新增】自定义规则 - 自定义重定向
【新增】监控 - 在左侧功能栏
【优化】回源域名解析巡检 -优化检测重载机制 
【优化】自定义规则 - 命中次数统计准确性及更新频率 
【修复】个别机器开启waf无法申请证书BUG(新建网站或旧网站重新编辑后生效)
【修复】已知BUG

<br/>
<br/>

## **2024-01-19 V3.1 正式版本**
【新增】添加网站 - 增加通配【\*】所有域名支持
【新增】回源配置 - 回源域名解析巡检 
【新增】访问域名不存在时，显示网站不存在页面 
【修复】卸载重装后绑定账号不会自动恢复授权的BUG
【修复】已知BUG

<br/>
<br/>

## **2024-01-15 V3.0 正式版本**
【修复】云WAF一处SQL注入BUG

<br/>
<br/>

## **2024-01-03 V2.9 正式版本**
【新增】网站日志 - \[日志管理\]/\[清空日志\]  
【新增】拦截日志 - 规则命中记录 - \[设置记录类型\]  
【修复】已知BUG
<br/>
<br/>

## **2023-12-28 V2.8 正式版本**
【新增】\[网站配置\] - 新增常用参数配置  
【新增】\[网站列表\] -\[禁止中国境外地区访问\]   
【优化】文件大小上传  
【优化】XSS引擎拦截  
【优化】文件上传检测引擎拦截  
【优化】允许用户设置\[服务器\]在\[攻击地图\]中的\[所在地\]  
【修复】\[网站配置\] - 全局规则不会自动继承到新建网站  
【修复】网站已有证书时再保存报错  
【修复】网站加速在开启了gzip压缩的场景下文本乱码的BUG  
【修复】规则命中记录会记录127.0.0.1的问题  
【修复】已知BUG
<br/>
<br/>

## **2023-12-20 V2.7 正式版本**
【新增】攻击大屏  
【新增】\[自定义规则\] - \[自定义cc防御\] -- 人机验证  
【修复】系统流量不刷新问题  
【优化】基础CC拦截效果大幅度提升  
【修复】已知BUG
<br/>
<br/>

## **2023-12-14 V2.6 正式版本**
【调整】更新WAF程序使用的IP库
【修复】控制台异常崩溃问题
【修复】XSS误拦截问题
【优化】提升控制台WEB服务性能
【修复】已知BUG
<br/>
<br/>

## **2023-12-05 V2.5 正式版本**
【新增】\[网站配置\]响应内容关键字替换
【新增】\[概览页\]系统流量监控图表
【新增】\[添加网站\]端口占用检测--仅检测waf端口转发占用的端口
【新增】\[自定义规则\]新增user-agent、referer匹配条件
【新增】\[自定义规则\] - \[自定义cc防御\]
【新增】开启CDN后自动获取真实客户端IP并写入访问日志
【修复】docker崩溃生成coredump导致磁盘空间不足的问题
【修复】waf端在某些场景下CPU跑满的BUG
【修复】\[ssl证书\]证书配置部署状态
【优化】\[添加网站\]回源地址输入交互
<br/>
<br/>

## **2023-11-29 V2.4 正式版本**
【优化】进一步减少\[自定义规则\]waf性能开销
【修复】\[端口转发\]--某些情况下设置失败BUG
【修复】\[端口转发\]--转发次数不准确BUG
【修复】\[网站加速\]--某些情况无法正常加速静态资源的BUG
【修复】已知BUG
<br/>
<br/>

## **2023-11-28 V2.3 正式版本**
【新增】[自定义规则]-可以根据各种条件制定拦截、放行规则  
【新增】证书可以引用到网站的自定义端口  
【新增】添加源站地址时增加域名支持  
【新增】开启动态口令认证时支持指定密钥  
【优化】[拦截日志]--加白url匹配条件调整为同时匹配网站名、请求方式、参数名  
【优化】[网站加速]--调整为仅加速静态资源，同时大幅优化加速性能  
【修复】已知BUG
<br/>
<br/>

## **2023-11-21 V2.2 正式版本**

注意：  
本次升级将升级 cloudwaf\_nginx 容器版本为 nginx-openresty/1.21.4.3 ，修复NGINX HTTP/2处理中的安全漏洞(C-2023-4487)  
建议使用ssh工具登录服务器执行：`btw 17` 命令进行升级。  
升级过程中网站无法访问，建议在用户访问量少时升级，预计需要 1-2 分钟。 

1. 【新增】IP组（可用功能：IP黑白名单、人机验证）  
2. 【优化】访问地图 可查看今天、昨天、近7天、近30天  
3. 【优化】\[网站列表\]添加网站时进行端口检测  
4. 【优化】\[WAF\]基础函数执行效率  
5. 【修复】\[网站加速\]命中率大于100%的问题  
6. 【修复】\[WAF\]CPU与内存占用异常过高的问题  
7. 【修复】\[规则命中记录\]列表获取失败问题

<br/>
<br/>

## **2023-11-15 V2.1 正式版本**
1. 【新增】端口转发  
2. 【新增】网站设置-模拟攻击  
3. 【新增】网站设置-文件路径保护-网站后台入口保护  
4. 【优化】网站列表 - 网站日志显示  
5. 【优化】WAF性能  
6. 【兼容】ARM架构  
7. 【修复】已知BUG

<br/>
<br/>

## **2023-11-10 V2.0 正式版本**
1. 【新增】网站加速  
2. 【新增】设置--自定义LOGO与拦截页面功能  
3. 【新增】地区限制--“中国(包括\[中国特别行政区:港,澳,台\])”常用选项  
4. 【新增】编辑、删除回源节点时检测http协议并更新  
5. 【新增】网站设置增加一键恢复默认防护配置  
6. 【修复】添加域名时加入特殊端口无法开启证书BUG  
7. 【修复】WAF程序误拦截BUG  
8. 【修复】WAF程序CPU占用持续上升问题  
9. 【修复】已知BUG

<br/>
<br/>

## **2023-11-06 V1.9 正式版本**
1. 【新增】页面左上角新增【需求反馈】提交功能  
2. 【优化】语义分析引擎  
3. 【优化】调整防护描述  
4. 【优化】【回源负载均衡】调整为公测状态，所有用户都可以使用  
5. 【修复】拦截日志 -- 规则命中记录状态显示错误  
6. 【修复】已知BUG

<br/>
<br/>

## **2023-11-04 V1.8 正式版本**
1. 【新增】《堡塔恶意IP共享计划》  
2. 【新增】回源负载均衡  
3. 【新增】网站监听ipv6  
4. 【新增】全局规则和站点规则--命令执行拦截  
5. 【新增】站点规则--护网防护  
6. 【新增】全局规则-拦截恶意IP访问  
7. 【优化】地区限制命中记录  
8. 【修复】价格页原价显示BUG

<br/>
<br/>

## **2023-11-01 V1.7 正式版本**
1. 【优化】基础CC防御
2. 【优化】添加网站--防护域名检测
3. 【优化】概览页--攻击地图
4. 【优化】F11全屏效果
5. 【修复】概览页--请求数据重复刷新问题
6. 【修复】添加网站--多域名添加BUG
7. 【修复】添加网站--防护域名检测CDN状态不准确BUG
8. 【修复】添加网站--检测源站地址BUG
9. 【修复】网站配置--gzip不生效BUG
10. 【修复】PHP检测导致的CPU满载问题
11. 【修复】SQL注入误报问题

<br/>
<br/>

## **2023-10-26 V1.6 正式版本**
1. 【优化】动态口令--兼容大部分APP  
2. 【优化】网站列表--提升列表加载速度  
3. 【优化】黑白名单--大幅提升导入速度  
4. 【修复】规则命中记录--清空日志BUG  
5. 【修复】添加网站--泛域名丢失通配符  
6. 【修复】设置--关闭在线客服悬浮框BUG  
7. 【修复】人机验证--删除BUG  
8. 【修复】黑白名单--删除BUG  
9. 【修复】已知BUG

<br/>
<br/>


## **2023-10-25 V1.5 正式版本**
1. 【新增】添加网站--防护域名检测  
2. 【新增】添加网站--源站地址检测  
3. 【新增】拦截日志--规则命中记录  
4. 【新增】全局规则--搜索框  
5. 【优化】添加网站UI界面交互  
6. 【修复】控制台因为致命BUG导致的进程终止  
7. 【修复】拦截日志--CC攻击事件持续时间负数BUG  
8. 【修复】已知BUG

<br/>
<br/>

## **2023-10-21 V1.4 正式版本**
1. 【新增】URI地区限制
2. 【新增】拦截日志--CC攻击事件
3. 【新增】设置页--显示/隐藏在线客服  
4. 【优化】WAF规则匹配优先级  
5. 【优化】全局通用规则可选择应用到指定网站  
6. 【优化】修改控制台端口后自动放行对应端口  
7. 【优化】防护域名自定义端口时自动放行对应端口  
8. 【优化】拦截页面样式  
9. 【优化】人机验证样式  
10. 【优化】命中次数样式  
11. 【修复】动态CC误判API的BUG  
12. 【修复】已知BUG

<br/>
<br/>

## **2023-10-13 V1.3 正式版本**
1. 【新增】免费领取14天专业版试用
2. 【新增】首页攻击地图新增切换设置  
3. 【新增】全屏功能  
4. 【新增】地区限制、黑白名单新增清空统计  
5. 【新增】控制台会话超时时间设置  
6. 【新增】单站点IDC访问限制-付费功能  
7. 【新增】网站SSL自定义加密套件和安全协议  
8. 【新增】地区限制重置命中次数  
9. 【优化】融合网站配置和独立规则  
10. 【优化】命中次数展示  
11. 【优化】拦截日志新增\[全部\]展示  
12. 【优化】NGINX各超时配置为600s  
13. 【优化】网站日志切割增加重载机制  
14. 【优化】优化域名检测  
15. 【修复】登录验证码区分大小写的BUG  
16. 【修复】购买后授权信息没有立即刷新的BUG  
17. 【去除】网站配置去除proxy\_http\_version配置

<br/>
<br/>

## **2023-09-26 V1.2 正式版本**
1.【优化】首页访问加载  
2.【优化】部分删除提示  
3.【优化】操作日志详情  
4.【优化】网站日志切割  
5.【优化】网站列表去除端口显示

<br/>
<br/>

## **2023-09-21 V1.1 正式版本**

1.【优化】黑白名单命中次数统计  
2.【优化】网站列表--兼容"域名:端口"格式添加网站  
3.【优化】防御模块提升稳定性  
4.【修复】动态口令登录不跳转BUG  
5.【修复】删除人机验证规则后，总数不更新的BUG  
6.【修复】全局规则--应用到所有网站bug

<br/>
<br/>

## **2023-09-20 V1.0 正式版本**
【优化】 首页大屏
【优化】 拦截显示

<br/>
<br/>

##  2023-09-14 V0.1 内测版本
【新增】 上线堡塔云WAF
